(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(14),u=t.n(o),c=t(4),l=t(3),m=t(2),i=t.n(m),s={get:function(){return i.a.get("/api/persons").then((function(e){return e.data}))},post:function(e){return i.a.post("/api/persons",e).then((function(e){return e.data}))},update:function(e,n){return i.a.put("".concat("/api/persons","/").concat(e),n).then((function(e){return e.data}))},remove:function(e){return i.a.delete("".concat("/api/persons","/").concat(e))}},d=function(e){var n=e.message;if(null===n)return null;return a.a.createElement("div",{className:"success"===n.type?"success":"error"},a.a.createElement("p",null,n.message))},f=function(e){var n=e.name,t=e.number,r=e.id,o=e.removePerson;return a.a.createElement("tr",null,a.a.createElement("td",null,n),a.a.createElement("td",null,t),a.a.createElement("td",null,a.a.createElement("button",{onClick:function(){window.confirm("Are you sure you want to remove ".concat(n," from your contacts?"))&&o(r)}},"Delete")))},p=function(e){var n=e.persons,t=e.filtered,r=e.removePerson;return a.a.createElement(a.a.Fragment,null,a.a.createElement("h2",null,"People"),a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"Name"),a.a.createElement("th",null,"Number"))),a.a.createElement("tbody",null,t?n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return a.a.createElement(f,{id:e.id,key:e.id,name:e.name,number:e.number,removePerson:r})})):n.map((function(e){return a.a.createElement(f,{id:e.id,key:e.id,name:e.name,number:e.number,removePerson:r})})))))},b=function(e){var n=e.filtered,t=e.handleFilter;return a.a.createElement(a.a.Fragment,null,a.a.createElement("label",{htmlFor:"filter"},"Filter names: "),a.a.createElement("input",{type:"text",id:"filter",value:n,onChange:t}))},h=function(e){var n=e.newPerson,t=e.addPerson,r=e.handleNewPerson,o=n.name,u=n.number;return a.a.createElement("form",{onSubmit:t},a.a.createElement("h2",null,"Add new People"),a.a.createElement("label",{htmlFor:"name"},"Name: "),a.a.createElement("input",{name:"name",id:"name",type:"text",value:o,onChange:r}),a.a.createElement("br",null),a.a.createElement("label",{htmlFor:"number"},"Number: "),a.a.createElement("input",{id:"number",name:"number",type:"text",value:u,onChange:r}),a.a.createElement("button",null,"Submit"))};function E(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}var g=function(){Object(r.useEffect)((function(){s.get().then((function(e){return O(e)}))}),[]);var e=Object(r.useState)(""),n=Object(l.a)(e,2),t=n[0],o=n[1],u=Object(r.useState)(null),m=Object(l.a)(u,2),i=m[0],f=m[1],g=Object(r.useState)([]),v=Object(l.a)(g,2),y=v[0],O=v[1],w=Object(r.useState)({name:"",number:""}),P=Object(l.a)(w,2),j=P[0],k=P[1],S=function(){-1===y.findIndex((function(e){return e.name===j.name}))?(s.post(j).then((function(e){return O(y.concat(e))})).catch((function(){return C("error","add",j)})),C("success","add",j)):window.confirm("".concat(j.name," is already in the phonebook. Would You like to update their contact info?"))&&(s.update(y.find((function(e){return e.name===j.name})).id,j).then((function(e){return O(y.map((function(n){return n.name===e.name?e:n})))})).catch((function(){return C("error","edit",j)})),C("success","edit",j))},C=function(e,n,t){"success"===e?"add"===n?(f({message:"".concat(t.name," has been added to the list"),type:e}),setTimeout((function(){f(null)}),5e3)):"edit"===n?(f({message:"Contact ".concat(t.name," has been changed"),type:e}),setTimeout((function(){f(null)}),5e3)):"delete"===n&&(f({message:"Contact ".concat(t.name," has been removed from your contacts"),type:e}),setTimeout((function(){f(null)}),5e3)):"error"===e&&("add"===n?(f({message:"Something went worng. ".concat(t.name," was not added"),type:e}),setTimeout((function(){f(null)}),5e3)):"edit"!==n&&"delete"!==n||(f({message:"Information on ".concat(t.name," has already been removed"),type:e}),setTimeout((function(){f(null)}),5e3)))};return a.a.createElement("div",null,a.a.createElement("h1",null,"Phonebook"),a.a.createElement(d,{message:i}),a.a.createElement(b,{filtered:t,handleFilter:function(e){o(e.target.value)}}),a.a.createElement(h,{newPerson:j,addPerson:function(e){e.preventDefault(),""===j.name||""===j.number?alert("Please input a name AND a number"):S(),k({name:"",number:""})},handleNewPerson:function(e){k(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?E(t,!0).forEach((function(n){Object(c.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):E(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},j,Object(c.a)({},e.target.name,e.target.value)))}}),a.a.createElement(p,{filtered:t,persons:y,removePerson:function(e){s.remove(e).then((function(){return C("success","delete",y.find((function(n){return n.id===e})))})).catch((function(){return C("error","delete",y.find((function(n){return n.id===e})))})),O(y.filter((function(n){return n.id!==e})))}}))};t(37);u.a.render(a.a.createElement(g,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.7b4bfe2c.chunk.js.map