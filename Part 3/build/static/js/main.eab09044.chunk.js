(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,t,n){e.exports=n(38)},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(14),c=n.n(o),u=n(4),l=n(3),m=n(2),i=n.n(m),s={get:function(){return i.a.get("/api/persons").then((function(e){return e.data}))},post:function(e){return i.a.post("/api/persons",e).then((function(e){return e.data}))},update:function(e,t){return i.a.put("".concat("/api/persons","/").concat(e),t).then((function(e){return e.data}))},remove:function(e){return i.a.delete("".concat("/api/persons","/").concat(e))}},f=function(e){var t=e.message;if(null===t)return null;return a.a.createElement("div",{className:"msg ".concat("success"===t.type?"success":"error")},a.a.createElement("p",null,t.message))},d=function(e){var t=e.name,n=e.number,r=e.id,o=e.removePerson;return a.a.createElement("tr",null,a.a.createElement("td",null,t),a.a.createElement("td",null,n),a.a.createElement("td",null,a.a.createElement("button",{onClick:function(){window.confirm("Are you sure you want to remove ".concat(t," from your contacts?"))&&o(r)}},"Delete")))},p=function(e){var t=e.persons,n=e.filtered,r=e.removePerson;return a.a.createElement(a.a.Fragment,null,a.a.createElement("h2",null,"People"),a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"Name"),a.a.createElement("th",null,"Number"))),a.a.createElement("tbody",null,n?t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})).map((function(e){return a.a.createElement(d,{id:e.id,key:e.id,name:e.name,number:e.number,removePerson:r})})):t.map((function(e){return a.a.createElement(d,{id:e.id,key:e.id,name:e.name,number:e.number,removePerson:r})})))))},b=function(e){var t=e.filtered,n=e.handleFilter;return a.a.createElement(a.a.Fragment,null,a.a.createElement("label",{htmlFor:"filter"},"Filter names: "),a.a.createElement("input",{type:"text",id:"filter",value:t,onChange:n}))},h=function(e){var t=e.newPerson,n=e.addPerson,r=e.handleNewPerson,o=t.name,c=t.number;return a.a.createElement("form",{onSubmit:n},a.a.createElement("h2",null,"Add new People"),a.a.createElement("label",{htmlFor:"name"},"Name: "),a.a.createElement("input",{name:"name",id:"name",type:"text",value:o,onChange:r}),a.a.createElement("br",null),a.a.createElement("label",{htmlFor:"number"},"Number: "),a.a.createElement("input",{id:"number",name:"number",type:"text",value:c,onChange:r}),a.a.createElement("button",null,"Submit"))};function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var v=function(){Object(r.useEffect)((function(){s.get().then((function(e){return O(e)}))}),[]);var e=Object(r.useState)(""),t=Object(l.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(null),m=Object(l.a)(c,2),i=m[0],d=m[1],v=Object(r.useState)([]),g=Object(l.a)(v,2),y=g[0],O=g[1],P=Object(r.useState)({name:"",number:""}),j=Object(l.a)(P,2),w=j[0],k=j[1],C=function(){-1===y.findIndex((function(e){return e.name===w.name}))?s.post(w).then((function(e){O(y.concat(e)),F("success",w,"add")})).catch((function(e){var t=e.response.data.error;F("error",t)})):window.confirm("".concat(w.name," is already in the phonebook. Would You like to update their contact info?"))&&s.update(y.find((function(e){return e.name===w.name})).id,w).then((function(e){O(y.map((function(t){return t.name===e.name?e:t}))),F("success",w,"edit")})).catch((function(e){var t=e.response.data.error;F("error",t)}))},F=function(e,t,n){"success"===e?"add"===n?(d({message:"".concat(t.name," has been added to the list"),type:e}),setTimeout((function(){d(null)}),5e3)):"edit"===n?(d({message:"Contact ".concat(t.name," has been changed"),type:e}),setTimeout((function(){d(null)}),5e3)):"delete"===n&&(d({message:"Contact ".concat(t.name," has been removed from your contacts"),type:e}),setTimeout((function(){d(null)}),5e3)):"error"===e&&(d({message:t.message,type:e}),setTimeout((function(){d(null)}),5e3))};return a.a.createElement("div",null,a.a.createElement("h1",null,"Phonebook"),a.a.createElement(f,{message:i}),a.a.createElement(b,{filtered:n,handleFilter:function(e){o(e.target.value)}}),a.a.createElement(h,{newPerson:w,addPerson:function(e){e.preventDefault(),""===w.name||""===w.number?alert("Please input a name AND a number"):C(),k({name:"",number:""})},handleNewPerson:function(e){k(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},w,Object(u.a)({},e.target.name,e.target.value)))}}),a.a.createElement(p,{filtered:n,persons:y,removePerson:function(e){s.remove(e).then((function(){F("success",y.find((function(t){return t.id===e})),"delete"),O(y.filter((function(t){return t.id!==e})))})).catch((function(e){var t=e.response.data.error;F("error",t)}))}}))};n(37);c.a.render(a.a.createElement(v,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.eab09044.chunk.js.map